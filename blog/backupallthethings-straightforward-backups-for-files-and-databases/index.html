<!doctype html>
<html>
<head>
  <meta charset='utf-8'/>
  <meta name='viewport' content='width=device-width, initial-scale=1'/>

  <title>BackupAllTheThings, Straightforward Backups For Files and Databases | devo.ps</title>

  <meta http-equiv='Content-Language' content='en'/>
  <meta name='keywords' content='devo.ps, DevOps, Cloud, servers, git, API, infrastructure, automation, Continuous Integration, Continuous Deployment, Configuration Management, Orchestration, System Administration, PaaS, IaaS, backup'/>
  <meta name='description' content='Dealing with servers doesn&#39;t have to be a pain: manage and automate all your servers with a few Git commands on any cloud, from Digital Ocean to AWS.'/>
  <meta name='msvalidate.01' content='86C1F235D57610586CFC5A2D77B7D446'/>
  <meta http-equiv='Content-Language' content='en'/>
  
  <!-- Favicons -->
  <link rel='shortcut icon' href='/assets/favicon.ico'>
<link rel='apple-touch-icon' sizes='57x57' href='/assets/favicons/apple-touch-icon-57x57.png'>
<link rel='apple-touch-icon' sizes='114x114' href='/assets/favicons/apple-touch-icon-114x114.png'>
<link rel='apple-touch-icon' sizes='72x72' href='/assets/favicons/apple-touch-icon-72x72.png'>
<link rel='apple-touch-icon' sizes='144x144' href='/assets/favicons/apple-touch-icon-144x144.png'>
<link rel='apple-touch-icon' sizes='60x60' href='/assets/favicons/apple-touch-icon-60x60.png'>
<link rel='apple-touch-icon' sizes='120x120' href='/assets/favicons/apple-touch-icon-120x120.png'>
<link rel='apple-touch-icon' sizes='76x76' href='/assets/favicons/apple-touch-icon-76x76.png'>
<link rel='apple-touch-icon' sizes='152x152' href='/assets/favicons/apple-touch-icon-152x152.png'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-196x196.png' sizes='196x196'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-160x160.png' sizes='160x160'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-96x96.png' sizes='96x96'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-16x16.png' sizes='16x16'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-32x32.png' sizes='32x32'>
<meta name='msapplication-TileColor' content='#da532c'>
<meta name='msapplication-TileImage' content='/assets/favicons/mstile-144x144.png'>
<meta name='msapplication-config' content='/assets/favicons/browserconfig.xml'>

  <!-- CSS -->
  <link href='/assets/styles.css?20140921' rel='stylesheet' type='text/css'/>
</head>
<body class='page-blog/backupallthethings-straightforward-backups-for-files-and-databases'>
  <header id='header'>
    <div class='wrapper'>
      <a href='/' class='logo'>devo.ps</a>

      <button class='toggle'>Menu</button>
      <nav class='menu'>
        <a href='https://www.hipchat.com/gyHEHtsXZ' target='_blank'>Chat with us</a>
        <a href='/pricing'>Pricing</a>
        <a href='http://app.devo.ps' class='signin'>Sign in</a>
      </nav>
    </div>
  </header>

  
<section id='main' class='blog post'>
  <div class='wrapper'>
    <header class='header'>
      <a href='/blog' class='back'><span>Back to the blog</span></a>

      <h1>BackupAllTheThings, Straightforward Backups For Files and Databases</h1>

      <span class='meta'>
        
        
        
        
        
        
        
        
        
        
          <img class='avatar' alt='Vincent Viallet' src='/images/team/vincent-small.png'/> 
          Vincent Viallet
        
        
        
        
        on <time datetime=''>November 19, 2014</time>
      </span>
    </header>

    <article class='content'>
      <p>Like it or not, if you&#39;re running a service online, you will most likely need to deal with data persistency, may this be databases or file storage. Parts of your architecture may be stateless (the cool kids these days are all about <a href="https://docker.com">Docker</a>), but you&#39;ll still need to worry about disaster recovery, crashes or corrupted data when dealing with production systems.</p>
<h2 id="tl-dr">tl;dr</h2>
<p>Existing backup solutions mostly deal with files, which is why we came up with <a href="https://github.com/devo-ps/backupallthethings">BackupAllTheThings (or simply batt)</a> to deal with backing up either folders or databases.</p>
<p align='center'><img src="/images/posts/backup-all-the-things.jpg" alt="Backup All The Things"/></p>

<h2 id="existing-backup-solutions">Existing backup solutions</h2>
<p>There&#39;s a plethora of projects doing a great job at dealing with backups. They offer advanced features like encryption, remote storage, catalogs, file search, scheduling, etc. For example, <a href="http://bacula.org">bacula</a> &amp; <a href="http://zmanda.com">zmanda</a> with their server/agent approach, or standalone alternatives like <a href="https://bup.github.io">bup</a> or <a href="http://duplicity.nongnu.org">duplicity</a>.</p>
<p>They all focus on file storage, backing up entire boxes, folders, etc. They rarely care about services or databases, assuming these will be dumped as files. Problem is, it isn&#39;t always as simple as it looks like.</p>
<p>Sysadmins are familiar with copying raw MySQL files from a running MySQL server. They&#39;ve also probably experienced getting inconsistent or corrupted data using that approach, unless they were extra careful (e.g. sync on commit, InnoDB tables, snapshot of the file system, ...). Even when dealing with commands like <code>mysqldump</code> it&#39;s hard to come up with the right set of parameters which may take up to 10 arguments such as <code>--single-transaction</code> or <code>--skip-lock-tables</code> depending on your database engine...</p>
<p>That&#39;s what led me to write <code>BackupAllTheThings</code>; it is by no mean intended to replace more complicated backup frameworks, but it does a decent job at handling files and more importantly provides simple methods to deal with databases (MySQL, PostgreSQL, MongoDB, CouchDB, Redis) following best-practices.</p>
<h2 id="installing-it">Installing it</h2>
<p>Just use <a href="https://pypi.python.org/pypi/backupallthethings">pypi</a>:</p>
<pre><code>pip install backupallthethings
</code></pre><h2 id="usage">Usage</h2>
<p><code>BackupAllTheThings</code> takes a similar concept with Web servers in Debian. Backup scripts are defined in a <code>scripts-available</code> folder that you enable (creating a symlink):</p>
<pre><code>batt enable &lt;service&gt;
batt disable &lt;service&gt;
</code></pre><p>Backing up all enabled services is then as simple as running:</p>
<pre><code>batt
</code></pre><p>There are a few options available:</p>
<ul>
<li>Define the destination of the backup (using the <code>--path</code> argument),</li>
<li>Backup individual services only, or sub-set of a service (e.g. <code>batt mysql</code> or <code>batt --mysql-db my_database</code>)</li>
</ul>
<p>The full list of options is available in the help (<code>batt -h</code>) or on <a href="https://github.com/devo-ps/backupallthethings">GitHub</a>.</p>
<h2 id="next-">Next?</h2>
<p>This is obviously very early; things are still pretty crude but it gets the job done. However, we felt like sharing it and inviting as many people as possible to suggest improvements to our <a href="https://github.com/devo-ps/backupallthethings/tree/master/scripts-available">existing backup scripts</a>.</p>

      
      <footer class='share'>
        

<a class='email' href='mailto:?body=http%3A%2F%2Fdevo.ps%2Fblog%2Fbackupallthethings-straightforward-backups-for-files-and-databases'><span>Share by email</span></a>
<a class='facebook' target='_blank' href='https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdevo.ps%2Fblog%2Fbackupallthethings-straightforward-backups-for-files-and-databases'><span>Share on facebook</span></a>
<a class='twitter' target='_blank' href='https://twitter.com/intent/tweet?text=@devo_ps%20&related=devo_ps&url=http%3A%2F%2Fdevo.ps%2Fblog%2Fbackupallthethings-straightforward-backups-for-files-and-databases'><span>Share on Twitter</span></a>
<a class='google' target='_blank' href='https://plus.google.com/share?url=http%3A%2F%2Fdevo.ps%2Fblog%2Fbackupallthethings-straightforward-backups-for-files-and-databases'><span>Share on Google+</span></a>
<a class='linkedin' target='_blank' href='http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fdevo.ps%2Fblog%2Fbackupallthethings-straightforward-backups-for-files-and-databases&title=BackupAllTheThings%2C%20Straightforward%20Backups%20For%20Files%20and%20Databases&source=devo.ps'><span>Share on LinkedIn</span></a>

      </footer>

      <footer class='subscribe'>
        <h2>Like what you just read?</h2>
        <p>Leave us your email address and we'll shoot you an email once in a while to share new content. We mostly write about development, infrastructure and DevOps.</p>
        <form action='http://wiredcraft.us2.list-manage1.com/subscribe/post?u=18eb8d6c34ad5d4e781541da9&amp;id=db875395f9' method='post' target='_blank'>
  <div class='field'>
    <input type='email' value='' name='EMAIL' class='required email' placeholder='Your email address'/>
  </div>
  <div class='field'>
    <input type='submit' value='Subscribe' name='subscribe' class='button'/>
  </div>
</form>
        <p>You can also <a href='http://feeds.feedburner.com/devo/BQLM' class='rss'>Subscribe to our RSS feed</a>.</p>
      </footer>

      <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'devo-ps'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </section>
  </div>
</section>


  <nav id='footer'>
    <div class='wrapper'>
      <nav class='product'>
        <h3>Product</h3>
        <a href='/pricing'>Pricing</a>
        <a href='http://github.com/devops-community'>Community</a>
        <!-- <a href='/features'>Features</a> -->
      </nav>
      <nav class='help'>
        <h3>Help</h3>
        <a class='chat' href='https://www.hipchat.com/gyHEHtsXZ' target='_blank'>Chat with us</a>
        <a class='documentation' href='http://docs.devo.ps' target='_blank'>Documentation</a>
        <a class='help' href='mailto:help@devo.ps' target='_blank'>Support</a>
      </nav>
      <nav class='company'>
        <h3>Company</h3>
        <a href='/about'>About</a>
        <a href='/blog'>Blog</a>
        <a href='http://twitter.com/devo_ps' target='_blank'>Twitter</a>
      </nav>
      <aside class='subscribe'>
        <h3>Subscribe to our newsletter</h3>
        <form action='http://wiredcraft.us2.list-manage1.com/subscribe/post?u=18eb8d6c34ad5d4e781541da9&amp;id=db875395f9' method='post' target='_blank'>
  <div class='field'>
    <input type='email' value='' name='EMAIL' class='required email' placeholder='Your email address'/>
  </div>
  <div class='field'>
    <input type='submit' value='Subscribe' name='subscribe' class='button'/>
  </div>
</form>
      </aside>
      <small class='legal'>
        Copyright © 2014 Wiredcraft Co. Ltd. <a href='/privacy'>Privacy</a> <a href='/tos'>Terms of Service</a>
      </small>
    </div>
  </nav>

  <div id='overlay'>
    <div id='modal'></div>
  </div>

  <!-- JS -->
  <script src='/assets/scripts.js' type='text/javascript'></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!--[if lt IE 9]><script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script><![endif]-->
  <script type='text/javascript'>
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '510b396a613f5d2666000007');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>
	<script type='text/javascript'>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34006371-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
