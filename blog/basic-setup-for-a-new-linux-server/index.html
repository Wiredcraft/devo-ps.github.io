<!doctype html>
<html>
<head>
  <meta charset='utf-8'/>
  <title>Basic Setup For A New Linux Server | devo.ps</title>

  <meta name='description' content='Dealing with servers doesn&#39;t have to be a pain: manage and automate all your servers with a few Git commands on any cloud, from Digital Ocean to AWS.'/>
  <meta name='keywords' content='devo.ps, DevOps, Cloud, servers, git, API, infrastructure, automation, Continuous Integration, Continuous Deployment, Configuration Management, Orchestration, System Administration, PaaS, IaaS, sysadmin, Linux, Ubuntu, configuration, packages, install'/>
  <meta name='viewport' content='width=device-width, initial-scale=1'/>
  <meta name="msvalidate.01" content="86C1F235D57610586CFC5A2D77B7D446" />
  <meta http-equiv="Content-Language" content="en"/>
  <!-- Favicons -->
  <link rel='shortcut icon' href='/assets/favicon.ico'>
<link rel='apple-touch-icon' sizes='57x57' href='/assets/favicons/apple-touch-icon-57x57.png'>
<link rel='apple-touch-icon' sizes='114x114' href='/assets/favicons/apple-touch-icon-114x114.png'>
<link rel='apple-touch-icon' sizes='72x72' href='/assets/favicons/apple-touch-icon-72x72.png'>
<link rel='apple-touch-icon' sizes='144x144' href='/assets/favicons/apple-touch-icon-144x144.png'>
<link rel='apple-touch-icon' sizes='60x60' href='/assets/favicons/apple-touch-icon-60x60.png'>
<link rel='apple-touch-icon' sizes='120x120' href='/assets/favicons/apple-touch-icon-120x120.png'>
<link rel='apple-touch-icon' sizes='76x76' href='/assets/favicons/apple-touch-icon-76x76.png'>
<link rel='apple-touch-icon' sizes='152x152' href='/assets/favicons/apple-touch-icon-152x152.png'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-196x196.png' sizes='196x196'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-160x160.png' sizes='160x160'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-96x96.png' sizes='96x96'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-16x16.png' sizes='16x16'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-32x32.png' sizes='32x32'>
<meta name='msapplication-TileColor' content='#da532c'>
<meta name='msapplication-TileImage' content='/assets/favicons/mstile-144x144.png'>
<meta name='msapplication-config' content='/assets/favicons/browserconfig.xml'>

  <!-- CSS -->
  <link href='/assets/styles.css' rel='stylesheet' type='text/css'/>
</head>
<body class='page-blog/basic-setup-for-a-new-linux-server'>
  <header id='header'>
    <div class='wrapper'>
      <a href='/' class='logo'>devo.ps</a>

      <button class='toggle'>Menu</button>
      <nav class='menu'>
        <a href='https://www.hipchat.com/gyHEHtsXZ' target='_blank'>Chat with us</a>
        <a href='http://docs.devo.ps'>Documentation</a>
        <a href='/about'>About</a>
        <a href='/blog'>Blog</a>
        <a href='http://app.devo.ps' class='signin'>Sign in</a>
      </nav>
    </div>
  </header>

  
<section id='main' class='blog post'>
  <div class='wrapper'>
    <header class='header'>
      <a href='/blog' class='back'><span>Back to the blog</span></a>

      <h1>Basic Setup For A New Linux Server</h1>

      <span class='meta'>
        
        
        
        
        
        
        
        
        
        
          <img class='avatar' alt='Vincent Viallet' src='/images/team/vincent-small.png'/> 
          Vincent Viallet
        
        
        
        
        on <time datetime=''>September 04, 2014</time>
      </span>
    </header>

    <article class='content'>
      <p>You just provisioned a new machine on AWS or Digital Ocean. It almost has that new car smell: great. Now what? You want to go from a vanilla install to a box that you&#39;ll be able to easily manage and has the <a href="http://devo.ps/blog/troubleshooting-5minutes-on-a-yet-unknown-box/">basic tools for troubleshootint it</a>. Let me share a few of the best practices we stick to when creating servers with <a href="http://devo.ps">devo.ps</a>. You should <a href="https://app.devo.ps">sign up for a free account</a> by the way: you&#39;ll get all of what I&#39;m about to list set up on your own Rackspace, Digital Ocean, Linode or AWS servers in a few minutes.</p>
<p>First, a couple things:</p>
<ul>
<li><p><strong>This setup isn&#39;t intended to be the lightest or smallest possible</strong>. We&#39;re not dealing with containers here, we can afford installing a few useful tools.</p>
</li>
<li><p>**This setup is very much opinionated, though based off of our experience working with a lot of teams of various sizes. We&#39;re open to suggestions.</p>
</li>
</ul>
<p>Let&#39;s get started:</p>
<ul>
<li><p><strong>OS</strong>: pick <strong>Ubuntu 14.04.1 LTS</strong>. It&#39;s a popular choice, with lots of relatively fresh packages, and the <a href="https://wiki.ubuntu.com/LTS">Long Term Support</a> guarantee from Ubuntu.</p>
</li>
<li><p><strong>Settings</strong>:</p>
<ul>
<li><p><strong>Set locales to UTF-8</strong> to avoid receiving annoying messages about &quot;no locale found&quot;.</p>
<p>  locale-gen en_US.UTF-8 &amp;&amp; echo &#39;LC_ALL=&quot;en_US.UTF-8&quot;&#39; &gt;&gt; /etc/default/locale</p>
</li>
<li><p><strong>Set swappiness to 0</strong> to limit swap usage as much as possible.</p>
<p>  echo &#39;vm.swappiness = 0&#39; &gt;&gt; /etc/sysctl.conf &amp;&amp; sysctl -p</p>
</li>
</ul>
</li>
<li><p><strong>Create a 2GB swap file at the root of the filesystem</strong> to prevent OOM (Out of Memory) errors. Often times, cloud instances don&#39;t come with a swap partition, which leads to error when the RAM starts to fill up.</p>
<pre><code>  dd if=/dev/zero of=/swapfile bs=1M count=2048
  mkswap /swapfile
  chmod 600 /swapfile
  echo &#39;/swapfile swap swap defaults 0 0&#39; &gt;&gt; /etc/fstab
  swapon -a
</code></pre></li>
<li><p><strong>Set nofile limit to 64K</strong> to avoid running in the 1024 open files limitation when, for example, you have a lot of databases and tables open.</p>
<pre><code>  cat &gt;&gt; /etc/security/limits.d/nofile.conf &lt;&lt; EOF
  # limits for number of open file for root and default users.
  root    hard    nofile  65536
  root    soft    nofile  65536
  *   hard    nofile  65536
  *   soft    nofile  65536
  EOF
</code></pre></li>
<li><p><strong>Linux users</strong>:</p>
<ul>
<li><p><strong>root</strong> should only be used for provisioning and configuration. After that, disable SSH access and use <code>sudo</code> instead.</p>
</li>
<li><p>For devo.ps, we also create a <strong>devops</strong> user which we use to access the box. You should probably add your own user and grant it <code>sudo</code>access.</p>
</li>
</ul>
</li>
<li><p><strong>Packages</strong>:</p>
<ul>
<li><p>For <strong>troubleshooting</strong>:</p>
<ul>
<li><p><strong><a href="http://hisham.hm/htop/">htop</a></strong> is a great alternative to top.</p>
</li>
<li><p><strong><a href="http://www.ex-parrot.com/pdw/iftop/">iftop</a></strong> provides realtime bandwidth investigation capabilities.</p>
</li>
<li><p><strong>sysstat</strong> gives you the ultimate troubslehooting tools; iostat, mpstat, sar, etc.</p>
</li>
<li><p><strong><a href="http://dag.wiee.rs/home-made/dstat/">dstat</a></strong> is a great collection of stat tools.</p>
</li>
</ul>
</li>
<li><p><strong>Git &amp; Subversion</strong> since they&#39;re the more commonly used VCS.</p>
</li>
<li><p><strong>make, gcc &amp; g++</strong> (we know it&#39;s controversial) are often required when building extensions (PECL, npm, pip...).</p>
</li>
<li><p><strong>postfix</strong> running standalone, listening only to localhost, allows you to send email and notifications.</p>
</li>
</ul>
</li>
</ul>
<p>Feedback is welcome. And if you don&#39;t feel like setting up all of this by yourself, <strong><a href="http://app.devo.ps">create a free devo.ps account</a> and get your own Digital Ocean, AWS, Rackspace or Linode servers ready in a few minutes</strong>.</p>

      
      <h2 class='feedback'>Have some feedback? Let us know on <a href='https://twitter.com/intent/tweet?text=@devo_ps%20&related=devo_ps&url=http://devo.ps/blog/basic-setup-for-a-new-linux-server' target='_blank'>Twitter</a>.</h2>

      <footer class='more'>
        <section class='pitch'>
  <h3>Manage servers with Git</h3>
  <p>Managing servers doesn't have to be painful: start using Git to control any cloud from Digital Ocean to AWS.</p>
<a href='https://app.devo.ps' class='button add'>Try it for <strong>free</strong></a>
<small>Already have an account? <a href='https://app.devo.ps'>Sign in</a>.</small>
</section>

<section class='subscribe'>
  <h3>Stay tuned</h3>
  <ul>
    <li class='newsletter'><form action='http://wiredcraft.us2.list-manage1.com/subscribe/post?u=18eb8d6c34ad5d4e781541da9&amp;id=db875395f9' method='post' target='_blank'>
  <div class='field'>
    <input type='email' value='' name='EMAIL' class='required email' placeholder='Your email address'/>
  </div>
  <div class='field'>
    <input type='submit' value='Subscribe' name='subscribe' class='button'/>
  </div>
</form></li>
    <li class='twitter'><a href='http://twitter.com/devo_ps'>Follow us on twitter</a></li>
    <li class='rss'><a href='http://feeds.feedburner.com/devo/BQLM'>RSS feed</a></li>
  </ul>
</section>

      </footer>
    </section>
  </div>
</section>


  <nav id='footer'>
    <div class='wrapper'>
      <a href='/privacy'>Privacy</a>
      <a href='/tos'>Terms of Service</a>
    </div>
  </nav>

  <aside id='support'>
    <h2><span>Need help?</span></h2>
    <nav class='links'>
      <a class='chat' href='https://www.hipchat.com/gyHEHtsXZ' target='_blank'>Chat with us</a>
      <a class='help' href='mailto:help@devo.ps' target='_blank'>Contact the support</a>
      <a class='documentation' href='http://docs.devo.ps' target='_blank'>Check the documentation</a>
    </nav>
  </aside>

  <!-- JS -->
  <script src='/assets/scripts.js' type='text/javascript'></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!--[if lt IE 9]><script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script><![endif]-->
  <script type='text/javascript'>
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '510b396a613f5d2666000007');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>
	<script type='text/javascript'>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34006371-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
